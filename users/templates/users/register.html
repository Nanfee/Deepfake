{% load static %}

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>用户注册</title>
    <link rel="stylesheet" href="{% static 'layui/css/layui.css' %}">
    <link rel="stylesheet" href="{% static 'css/register.css' %}">
</head>
<body>
    <div class="back">
        <div id="register_panel">
            <h1>谛听</h1>
            <form action="{% url 'users:register' %}" method="post" class="layui-form">
                {% csrf_token %}
                <div class="layui-form-item">
						<input type="text" name="username" id="username" required  lay-verify="required|username" placeholder="您的用户名" autocomplete="off" class="layui-input" style="height: 40px; font-size: 15px">
				</div>
				<div class="layui-form-item">
                    <input type="password" name="password" id="password" required lay-verify="required|pass" placeholder="您的密码" autocomplete="off" class="layui-input" style="height: 40px;font-size: 15px">
                </div>
                <div class="layui-form-item">
						<input type="password" name="password2" id="password2" required lay-verify="required|pass2" placeholder="您的密码" autocomplete="off" class="layui-input"  style="height: 40px; font-size: 15px">
				</div>
                <div class="layui-form-item">
                    <input type="text" name="telephone" id="telephone" required lay-verify="required|phone" placeholder="您的手机号" autocomplete="off" class="layui-input" style="height: 40px; font-size: 15px">
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-inline" style="width: 220px">
                        <input type="text" name="verification" id="verification" lay-verify="verification" placeholder="验证码" autocomplete="off" class="layui-input" style="height: 40px; font-size: 15px">
                    </div>
                    <button class="layui-btn layui-btn-primary" id="verbtn" lay-filter="#" style="width: 140px">免费获取验证码</button>
                </div>
                <div class="layui-form-item">
					<button class="layui-btn" lay-filter="*" lay-submit style="width: 100%; height: 40px; background-color: #ff9d00; font-size: 20px">注 册</button>
				</div>
            </form>
        </div>
    </div>
</body>
<script type="text/javascript" src="{% static 'layui/layui.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.js' %}"></script>
<script>
layui.use('form', function() {
    var form = layui.form;
    form.verify({
        username: function(value, item) { //value：表单的值、item：表单的DOM对象
            if (!new RegExp("^[a-zA-Z0-9_\u4e00-\u9fa5\\s·]+$").test(value)) {
                return '用户名不能有特殊字符';
            }
            if (/(^\_)|(\__)|(\_+$)/.test(value)) {
                return '用户名首尾不能出现下划线\'_\'';
            }
            if (/^\d+\d+\d$/.test(value)) {
                return '用户名不能全为数字';
            }
        },
        pass: [
            /^[\S]{8,25}$/, '密码必须8到25位，且不能出现空格'
        ],
        pass2: function(value, item) {
            if ($("#password").val() != value) {
                return '两次密码输入不一致';
            }
        },
    });
    var layer = layui.layer;
    var msg = '{{ message }}';
    console.log(msg)
    if(msg != '') {
        layer.msg(msg, {icon: 5});
    }
});
</script>
</html>